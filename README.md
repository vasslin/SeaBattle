# Лабораторная работа 5
## Задача

Спроектировать и реализовать консольное приложение для игры в морской бой с интерфейсом взаимодействия через стандартные потоки ввода\вывода

### Правила

Правила идентичны классическому [морскому бою](https://ru.wikipedia.org/wiki/%D0%9C%D0%BE%D1%80%D1%81%D0%BA%D0%BE%D0%B9_%D0%B1%D0%BE%D0%B9_(%D0%B8%D0%B3%D1%80%D0%B0)), за исключением того, что размер поля и количество кораблей может быть произвольным (размеры кораблей соответствуют размерам в классической игре)


Для игры нужны два игрока: master и slave. Master дополнительно устанавливает параметры игры: размер поля и количество кораблей, и сообщает их slave. Далее, оба игрока расставляют свои корабли согласно этим параметрам, и, после начала игры, поочерёдно стреляют друг в друга, по правилам классического морского боя


### Команды

В приведённой далее таблице указаны команды, их параметры и варианты ответа.
Ответ всегда заканчивается символом конца строки. Все команды и ответы печатаются в нижнем регистре.

| Команда                      | Ответ          | Описание |
| -------                      | -----          | --------                                    |
| ping                         |  pong          |   тестовая команда                          |
| exit                         |  ok            |   программа завершается                     |
| create [master,slave]        |  ok            |   создать игру в режиме master или slave соответственно       |
| start                        |  ok            |   старт игры                     |
| stop                         |  ok            |   остановка текущей партии       |
| set width  N                 |  ok/failed     |   установить ширину поля (N положительное, влезает в uint64_t)       |
| get width                    |  N             |   получить длину поля  (N положительное, влезает в uint64_t)      |
| set height N                 |  ok/failed     |   установить высоту поля (N положительное, влезает в uint64_t)        |
| get height                   |  N             |   получить высоту поля  (N положительное, влезает в uint64_t)      |
| set count [1,2,3,4]  N       |  ok/failed     |   установить количество кораблей определенного типа (N положительное, влезает в uint64_t)        |
| get count [1,2,3,4]          |  N             |   получить количество кораблей определенного типа (N положительное, влезает в uint64_t)        |
| set strategy [ordered,custom]|  ok            |   выбрать стратегию для игры        |
| shot X Y                     |  miss/hit/kill |   выстрел по вашим короаблям в координатах (X,Y) (X,Y положительные, влезают в uint64_t)      | 
| shot                         |  X Y           |   вернуть координаты вашего следующего выстрела, в ответе два числа через пробел  (X,Y положительные, влезают в uint64_t)       |
| finished                     |  yes/no        |   окончена ли текущая партия       |
| win                          |  yes/no        |   являетесь ли вы победителем       |
| lose                         |  yes/no        |   являетесь ли вы проигравшим       |
| dump PATH                    |  ok            |   сохранить размер поля и вашу текущую расстановку кораблей в файл        |
| load PATH                    |  ok            |   загрузить размер поля и расстановку кораблей из файла      |

### Формат файла для команды dump\load

Файл в текстовом формате, где первая строка включает размер поля (ширина, высота) через пробел.
Далее на каждой строке описывается размер корабля и координаты (по ширине, по высоте) через пробел

### Стратегии

Вам требуется реализовать две (как минимум) стратегии ведения боя:

* Ordered - алгоритм для тестов, стреляет последовательно построчно начиная с точки (0,0)
* Custom  - ваш алгоритм (используется по-умолчанию)


## Требования

* При генерации игры размер карты и количество кораблей должны быть непротиворечивы (размер поля не может быть нулевым, все корабли можно разместить на поле)
* Координаты (0,0) - левый верхний угол
* В игре всегда один игрок master, другой - slave
* Игра не может начаться пока не будут заданы размеры поля и количество кораблей (количество кораблей хотя бы одного типа должно быть больше 0)
* После старта игры размеры поля и количество кораблей не может быть изменено
* Тип стратегии может быть изменен в процессе игры
* Ответы команд _win\finished\lose_ должны быть не противоречивы (например нельзя выиграть или проиграть, если игра не закончена)
* Команда load может быть вызвана до старта игры, тогда она переопределяет правила сгенерированные _create_ (может быть использована для тестов)

## Реализация

Ваше приложение должно реализовать обе роли - master и slave

Прием команд и ответ осуществляется через стандартные потоки ввода\вывода.

В данной работе оценивается архитектура выбранного решения и организация кодовой базы. Требуется подумать, какие абстракции есть в задании, отделить работу с вводом-выводом от бизнес-логики.

Написание тестов приветствуется.

## NB

При каждом запуске игры ваше приложение реализует стратегию только одного игрока (либо master, либо slave). Для полноценной игры требуется либо второе приложение, либо человек.

После третьего дедлайна будут проведены соревнования алгоритмов в рамках каждой группы. Первое место получит дополнительные 5 баллов, пятое - 1 балл.  Ограничение по памяти - 64Mb
Правила турнира:

    * Все участинки играют попарно две игры, меняясь ролями  (master\slave)
    * Победа в 2 матчах - 3 очка, ничья - 1, поражение - 0
    * Нарушение требований к игре (некорректные команды, неправильная расстановка и т.д) - поражение
    * Падение приложния (по любой причине кроме некооретной команды) - поражение
    * Первым стреляет slave
    * Master должен "переживать" созданную игру до конца

## Deadline

1. 10.12.24 23:59 - 0.8
2. 17.12.24 23:59 - 0.65
3. 24.12.24 23:59 - 0.5
